import{q as f,r as v,j as e,s as g}from"./app-891b08b4.js";import{A as b}from"./AuthenticatedLayout-a2a0a01f.js";import{T as y}from"./TextInput-8f4c106c.js";import{I as N}from"./InputLabel-4f785d7c.js";import"./index-8c46b72d.js";/* empty css             */import{P as w}from"./PrimaryButton-907b3a68.js";import{S as _}from"./SelectInput-76a3278b.js";import{I as m}from"./InputError-e93acfeb.js";import"./transition-28db58fe.js";function M({auth:x,pageant:r,candidates:d}){const{data:n,setData:l,post:u,errors:a}=f({round:1,scores:[]});v.useEffect(()=>{if(!n.round)return;const s=[];d.forEach(t=>{if(t.candidates_deduction.length>0){const i=t.candidates_deduction.filter(o=>o.pivot.pageant_round_id==n.round);if(console.log(i),i.length<1)return;s[t.id]=i[0].pivot.deduction}}),l("scores",s),console.log(n.scores)},[n.round]);const h=d.filter(s=>s.gender=="ms"),p=d.filter(s=>s.gender=="mr"),j=s=>{s.preventDefault(),u(route("pageant.deduct.store",{pageant:r}))},c=(s,t)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{className:"flex space-x-4 items-center px-3 py-2",children:[e.jsx("div",{children:s.picture?e.jsx("img",{className:"rounded-full h-16 w-16 object-cover border border-black bg-white",src:"/storage/"+s.picture,alt:s.full_name}):""}),e.jsx("div",{className:"dark:text-white",children:"#"+s.candidate_number}),e.jsxs("div",{children:[e.jsx("div",{className:"uppercase font-bold",children:s.full_name}),e.jsx("div",{className:"text-sm text-gray-400",children:s.nickname})]})]})}),e.jsx("td",{className:"text-center px-3 py-2 uppercase",children:e.jsx(y,{type:"number",name:"scores[]",value:n.scores[s.id]??0,min:0,onChange:i=>{const o=n.scores;o[s.id]=i.target.value,l("scores",o)}})})]},t);return e.jsxs(b,{user:x.user,header:e.jsxs("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:[r.pageant," - Points Deduction"]}),children:[e.jsx(g,{title:"Pageant"}),e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6 dark:text-white",children:[e.jsx(m,{message:a.round}),e.jsx(m,{message:a.scores}),e.jsxs("form",{onSubmit:j,children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("div",{children:e.jsxs("div",{className:"uppercase",children:["Pageant Type: ",r.type]})}),e.jsx("div",{children:e.jsx(w,{children:"Save"})})]}),e.jsxs("div",{className:"mt-4 gap-2 flex items-center",children:[e.jsx(N,{value:"Round"}),e.jsxs(_,{name:"round",value:n.round,onChange:s=>{l("round",s.target.value)},children:[e.jsx("option",{value:"",hidden:!0,children:"Select"}),e.jsx("option",{value:"0",children:"Round 0"}),r.pageant_rounds.map((s,t)=>e.jsx("option",{value:s.id,children:`Round ${s.round} (${s.number_of_candidates})`},"R"+t))]})]}),e.jsx("hr",{}),(r.type=="mr"||r.type=="mr&ms")&&e.jsxs("div",{children:[e.jsx("h2",{className:"uppercase font-bold text-lg tracking-wide",children:"Mr Candidates"}),e.jsx("table",{children:e.jsx("tbody",{children:p.map(s=>c(s,index))})})]}),r.type=="mr&ms"&&e.jsx("hr",{className:"my-4"}),(r.type=="ms"||r.type=="mr&ms")&&e.jsxs("div",{children:[e.jsx("h2",{className:"uppercase font-bold text-lg tracking-wide",children:"Ms Candidates"}),e.jsx("table",{children:e.jsx("tbody",{children:h.map((s,t)=>c(s,t))})})]})]})]})})})]})}export{M as default};
