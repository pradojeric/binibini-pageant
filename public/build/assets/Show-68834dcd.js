import{q as v,j as s,s as y}from"./app-bb087a40.js";import{A as b}from"./AuthenticatedLayout-34a881ed.js";import"./TextInput-fc1efaee.js";import l from"./CandidateBox-0be827c9.js";import{P as N}from"./PrimaryButton-4e7bcbe5.js";/* empty css             */import"./transition-f1420beb.js";import"./ScoringInput-049eb9f4.js";import"./InputLabel-83e42476.js";import"./index-09f8345e.js";function M({auth:m,pageant:r,candidates:o}){const{data:i,setData:x,post:u}=v({scores:[]}),h=o.filter(e=>e.gender=="ms"),f=o.filter(e=>e.gender=="mr"),n=(e,t,j)=>{const a={candidate_id:e,criteria_id:t,score:j};if(!i.scores.find(d=>d.candidate_id===e&&d.criteria_id===t))console.log("Not Found. Adding..."),x("scores",[...i.scores,a]);else{console.log("Found. Adding...");const d=i.scores.findIndex(c=>c.candidate_id===e&&c.criteria_id===t);i.scores[d]=a}},p=()=>{let e=new Set;for(let t of i.scores)e.add(t.candidate_id);for(let t of o)if(!e.has(t.id))return!1;return!0},g=e=>{if(e.preventDefault(),!p()){alert("All candidates must be scored");return}u(route("scoring.store",r.id),{onError:t=>{console.log(t)}})};return s.jsxs(b,{user:m.user,header:s.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:r.pageant}),children:[s.jsx(y,{title:"Pageant"}),s.jsx("div",{className:"py-12 bg-fixed bg-contain bg-center",style:{backgroundImage:`url(/storage/${r.background})`},children:s.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:s.jsx("div",{className:"p-6 dark:text-white",children:s.jsxs("form",{onSubmit:g,children:[s.jsxs("div",{className:"flex justify-between mb-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"uppercase",children:["Rounds: ",r.current_round]}),s.jsxs("div",{className:"uppercase",children:["Pageant Type: ",r.type]})]}),s.jsx("div",{children:s.jsx(N,{children:"Save"})})]}),s.jsx("hr",{}),(r.type=="mr"||r.type=="mr&ms")&&s.jsxs("div",{children:[s.jsx("h2",{className:"uppercase font-bold text-lg tracking-wide",children:"Mr Candidates"}),s.jsx("div",{className:"grid grid-cols-4 gap-8 mt-4",children:f.map(e=>s.jsx(l,{candidate:e,criterias:r.criterias,onInputData:n},e.id))})]}),r.type=="mr&ms"&&s.jsx("hr",{className:"my-4"}),(r.type=="ms"||r.type=="mr&ms")&&s.jsxs("div",{children:[s.jsx("h2",{className:"uppercase font-bold text-lg tracking-wide",children:"Ms Candidates"}),s.jsx("div",{className:"grid grid-cols-4 gap-8 mt-4",children:h.map(e=>s.jsx(l,{candidate:e,criterias:r.criterias,onInputData:n},e.id))})]})]})})})})})]})}export{M as default};
