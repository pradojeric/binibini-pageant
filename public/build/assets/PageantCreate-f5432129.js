import{q as P,r as R,j as e,s as M}from"./app-1bfcb586.js";import{A as S}from"./AuthenticatedLayout-25918691.js";import{I as i}from"./InputLabel-81d1bc36.js";import{T as c}from"./TextInput-317be703.js";import{I as p}from"./InputError-e8e84da0.js";import{S as E}from"./SelectInput-47275ee6.js";import{P as F}from"./PrimaryButton-ad04d7ca.js";import"./transition-5f6c6279.js";function G({auth:N}){const{data:t,setData:m,post:b,processing:y,errors:u}=P({pageant:"",type:"",background:"",rounds:1,pageant_rounds:{mr:[{round:1,name:"",number_of_candidates:1}],ms:[{round:1,name:"",number_of_candidates:1}]}}),_=[{id:"ms",value:"Ms."},{id:"mr",value:"Mr."},{id:"mr&ms",value:"Mr. & Ms."}],g=a=>a==="mr&ms"?["mr","ms"]:a?[a]:[],x=R.useMemo(()=>t.type?t.type==="mr&ms"?["mr","ms"]:[t.type]:[],[t.type]),h=a=>{if(a==="")return"";const s=parseInt(a,10);return isNaN(s)||s<1?1:s},j=a=>Array.from({length:a},(s,n)=>({round:n+1,name:"",number_of_candidates:1})),C=a=>{const s=h(a.target.value),n=j(s),r=g(t.type),d={};r.forEach(o=>{const f=t.pageant_rounds[o]??[],v=[];for(let l=0;l<s;l++)v.push(f[l]?{...f[l],round:l+1}:{...n[l]});d[o]=v}),m({...t,rounds:s,pageant_rounds:d})},k=(a,s,n)=>{const r=h(n);m("pageant_rounds",{...t.pageant_rounds,[a]:t.pageant_rounds[a].map((d,o)=>o===s?{...d,number_of_candidates:r}:d)})},w=(a,s,n)=>{m("pageant_rounds",{...t.pageant_rounds,[a]:t.pageant_rounds[a].map((r,d)=>d===s?{...r,name:n}:r)})},I=a=>{a.preventDefault(),b(route("pageants.store"))};return e.jsxs(S,{user:N.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"Create Pageants"}),children:[e.jsx(M,{title:"Pageant"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:I,encType:"multipart/form-data",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"pageant",value:"Pageant Name"}),e.jsx(c,{id:"pageant",type:"text",name:"pageant",value:t.pageant,className:"mt-1 block w-full",onChange:a=>m("pageant",a.target.value)}),e.jsx(p,{message:u.pageant,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(i,{htmlFor:"type",value:"Pageant Type"}),e.jsxs(E,{id:"type",name:"type",className:"mt-1 block w-full",value:t.type,onChange:a=>{const s=a.target.value,n=g(s),r=j(t.rounds),d={};n.forEach(o=>{d[o]=t.pageant_rounds[o]??r}),m({...t,type:s,pageant_rounds:d})},children:[e.jsx("option",{hidden:!0,children:"Select..."}),_.map(a=>e.jsx("option",{value:a.id,children:a.value},a.id))]}),e.jsx(p,{message:u.type,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(i,{htmlFor:"background",value:"Custom Background"}),e.jsx(c,{id:"background",type:"file",name:"background",accept:"image/*",onChange:a=>m("background",a.target.files[0]),className:"mt-1 block w-full"}),e.jsx(p,{message:u.background,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(i,{htmlFor:"rounds",value:"Rounds"}),e.jsx(c,{id:"rounds",type:"number",name:"rounds",min:1,value:t.rounds,className:"mt-1 block w-full",onChange:C}),e.jsx(p,{message:u.rounds,className:"mt-2"})]}),x.length>0&&e.jsx("div",{className:"mt-4 flex justify-between gap-4 dark:text-white",children:x.map(a=>e.jsxs("div",{children:[e.jsx("div",{className:"uppercase tracking-wide mb-2",children:a==="mr"?"Male Candidate":"Female Candidate"}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2",children:"Round"}),e.jsx("th",{className:"px-3 py-2",children:"Name"}),e.jsx("th",{className:"px-3 py-2",children:"Number of Candidates"})]})}),e.jsx("tbody",{children:t.pageant_rounds[a].map((s,n)=>e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:s.round}),e.jsx("td",{children:e.jsx(c,{type:"text",value:s.name,onChange:r=>w(a,n,r.target.value)})}),e.jsx("td",{children:e.jsx(c,{type:"number",min:1,value:s.number_of_candidates,onChange:r=>k(a,n,r.target.value)})})]},`${a}${s.round}`))})]})]},a))}),e.jsx("div",{className:"flex items-center justify-end mt-4",children:e.jsx(F,{className:"ml-4",disabled:y,children:"Create"})})]})})})})})]})}export{G as default};
