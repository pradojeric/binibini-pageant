import{r as j,j as e}from"./app-0d49c6ba.js";import{T as N}from"./TableComponent-53f63566.js";function f(h,d="total"){function l(r,a){return a==="total"?r.total:r.scores[a].total}function c(r,a,m){const i=(m/(a-r+1)).toFixed(1);for(let p=r;p<=a;p++)t[p].rank=i}const t=[...h].sort((r,a)=>l(a,d)-l(r,d));let s=1,n=0,x=0,o=l(t[0],d);return t.forEach((r,a)=>{const m=l(r,d);x+=s,m===o&&a!==0?a===t.length-1&&c(n,a,x):(a-n>1?c(n,a-1,x-s):t[n].rank=n+1,n=a,x=s,o=m,a===t.length-1&&(t[a].rank=a+1)),s++}),t}function k({criteria:h,allCandidates:d,gender:l,judges:c}){const t=f(d,h.id);return e.jsxs("div",{className:"dark:text-white mt-2",children:[e.jsxs("h2",{className:"uppercase font-bold text-xl",children:[l," Candidates"]}),e.jsxs(N,{customHeader:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2",children:"Candidate"}),c.map(s=>e.jsx("th",{className:"px-3 py-2",children:s.name},"judge"+s.id)),e.jsx("th",{className:"px-3 py-2",children:"Total"}),e.jsx("th",{className:"px-3 py-2",children:"Rank"})]})}),e.jsx("tbody",{className:"divide-y",children:t.map((s,n)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{className:"flex space-x-4 items-center px-3 py-2",children:[e.jsx("div",{className:"dark:text-white",children:"#"+s.candidate_number}),e.jsxs("div",{children:[e.jsx("div",{className:"uppercase font-bold dark:text-gray-200 whitespace-nowrap",children:s.full_name_last_name_first}),e.jsx("div",{className:"text-sm dark:text-gray-400",children:s.nickname})]})]})}),c.map(x=>e.jsx("td",{className:"px-3 py-1 text-center",children:s.scores[h.id][x.id]},"judge-cand"+x.id)),e.jsx("td",{className:"px-3 py-1 text-center",children:s.scores[h.id].total}),e.jsx("td",{className:"px-3 py-1 text-center",children:s.rank})]},"cand"+s.id))})]})]})}function u({allCandidates:h,gender:d,criterias:l}){const c=f(h);return e.jsxs("div",{className:"dark:text-white mt-2",children:[e.jsxs("h2",{className:"uppercase font-bold text-xl",children:[d," Candidates"]}),e.jsxs(N,{customHeader:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2",children:"Candidate"}),l.map(t=>e.jsx("th",{className:"px-3 py-2",children:t.name},t.id)),e.jsx("th",{className:"px-3 py-2",children:"Total"}),e.jsx("th",{className:"px-3 py-2",children:"Rank"})]})}),e.jsx("tbody",{className:"divide-y",children:c.map((t,s)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{className:"flex space-x-4 items-center px-3 py-2",children:[e.jsx("div",{className:"dark:text-white",children:"#"+t.candidate_number}),e.jsxs("div",{className:"grow-0",children:[e.jsx("div",{className:"uppercase font-bold dark:text-gray-200 whitespace-nowrap",children:t.full_name_last_name_first}),e.jsx("div",{className:"text-sm dark:text-gray-400",children:t.nickname})]})]})}),l.map(n=>e.jsx("td",{className:"px-3 py-1 text-center",children:t.scores[n.id].total},n.id)),e.jsx("td",{className:"px-3 py-1 text-center",children:t.total}),e.jsx("td",{className:"px-3 py-1 text-center",children:t.rank})]},"cand"+t.id))})]})]})}const g=j.forwardRef(function({pageant:d,maleCandidates:l=[],femaleCandidates:c=[],criterias:t=[],criteria:s,judges:n=[]},x){const o=x||j.useRef(),r=(a,m,i)=>e.jsx(k,{criteria:m,allCandidates:a,judges:n,gender:i},"male"+m.id);return e.jsx("div",{className:"p-6",children:e.jsxs("div",{ref:o,children:[e.jsx("h1",{className:"uppercase font-extrabold tracking-wide text-3xl dark:text-white text-center",children:d.pageant}),l.length>0&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"p-2 break-after-page",children:[e.jsx("div",{className:"uppercase text-2xl font-bold dark:text-white",children:s?s.name+" - Round "+s.round:"Grand Total"}),e.jsx("hr",{}),e.jsxs("div",{className:"my-2",children:[s&&r(l,s,"male"),!s&&e.jsx(u,{allCandidates:l,gender:"male",criterias:t,judges:n})]})]},s.name)}),c.length>0&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"p-2 break-after-page",children:[e.jsx("div",{className:"uppercase text-2xl font-bold dark:text-white",children:s?s.name+" - Round "+s.round:"Grand Total"}),e.jsx("hr",{}),e.jsxs("div",{className:"my-2",children:[s&&r(c,s,"female"),!s&&e.jsx(u,{allCandidates:c,gender:"female",criterias:t,judges:n})]})]},s.name)})]})})});export{g as default};
