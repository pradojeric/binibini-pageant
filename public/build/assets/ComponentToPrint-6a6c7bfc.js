import{r as m,j as t}from"./app-3ee567a0.js";import{T as u}from"./TableComponent-89365bef.js";function f(s,a="total"){const n=[...s].sort((c,e)=>{const d=a==="total"?c.total:c.scores[a].total;return(a==="total"?e.total:e.scores[a].total)-d});let l=0;for(;l<n.length;){const c=a==="total"?n[l].total:n[l].scores[a].total;let e=l,d=0;for(;e<n.length&&(a==="total"?n[e].total:n[e].scores[a].total)===c;)d+=e+1,e++;const r=(d/(e-l)).toFixed(1);for(let o=l;o<e;o++)n[o].rank=r;l=e}return n}function N({criteria:s,allCandidates:a,gender:n,judges:l}){const c=f(a,s.id);return t.jsxs("div",{className:"dark:text-white mt-2",children:[t.jsxs("h2",{className:"uppercase font-bold text-xl",children:[n," Candidates"]}),t.jsxs(u,{customHeader:!0,children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-3 py-2",children:"Candidate"}),!(s.is_subtotal||s.is_grand_total||s.hidden_scoring)&&l.map(e=>t.jsx("th",{className:"px-3 py-2",children:e.name},"judge"+e.id)),t.jsx("th",{className:"px-3 py-2",children:"Total"}),t.jsx("th",{className:"px-3 py-2",children:"Rank"})]})}),t.jsx("tbody",{className:"divide-y",children:c.map((e,d)=>t.jsxs("tr",{children:[t.jsx("td",{children:t.jsxs("div",{className:"flex space-x-4 items-center px-3 py-2",children:[t.jsx("div",{className:"dark:text-white",children:"#"+e.candidate_number}),t.jsxs("div",{children:[t.jsx("div",{className:"uppercase font-bold dark:text-gray-200 whitespace-nowrap",children:e.full_name_last_name_first}),t.jsx("div",{className:"text-sm dark:text-gray-400",children:e.nickname})]})]})}),!(s.is_subtotal||s.is_grand_total||s.hidden_scoring)&&l.map(r=>t.jsx("td",{className:"px-3 py-1 text-center",children:e.scores[s.id][r.id]},"judge-cand"+r.id)),t.jsx("td",{className:"px-3 py-1 text-center",children:e.scores[s.id].total}),t.jsx("td",{className:"px-3 py-1 text-center",children:e.rank})]},"cand"+e.id))})]})]})}const k=m.forwardRef(function({pageant:a,maleCandidates:n=[],femaleCandidates:l=[],criterias:c=[],criteria:e,judges:d=[]},r){const o=r||m.useRef(),h=[{list:n,gender:"male"},{list:l,gender:"female"}],p=(i,x,j)=>t.jsx(N,{criteria:x,allCandidates:i,judges:d,gender:j},"male"+x.id);return t.jsx("div",{className:"p-6",children:t.jsxs("div",{ref:o,children:[t.jsx("h1",{className:"uppercase font-extrabold tracking-wide text-3xl dark:text-white text-center",children:a.pageant}),h.map(({list:i,gender:x})=>i.length>0?t.jsxs("div",{className:"p-2 break-after-page",children:[t.jsx("div",{className:"uppercase text-2xl font-bold dark:text-white",children:e.is_grand_total?`${e.round_name}`:`${e.round_name} - ${e.name}`}),t.jsx("hr",{}),t.jsx("div",{className:"my-2",children:p(i,e,x)})]},x):null)]})})});export{k as default};
